SET ONLYMAIN=1
SET DJGPPCOMPILE=1

del r:\main.exe

call c:\_wat_c_\setvars.bat
set INCLUDEOLD=%INCLUDE%
set INCLUDE=%INCLUDE%;SRC\STL;SRC\IMGUI;

if %ONLYMAIN%==1 goto onlymain
del r:\*.OBJ
call _BUILD\cc.bat SRC\TERRAIN\T_COLL.CPP T_COLL.OBJ
call _BUILD\cc.bat SRC\TERRAIN\T_MAP.CPP T_MAP.OBJ
call _BUILD\cc.bat SRC\TERRAIN\T_DLNAY.CPP T_DLNAY.OBJ
call _BUILD\cc.bat SRC\TERRAIN\T_LAYERS.CPP T_LAYERS.OBJ
call _BUILD\cc.bat SRC\TERRAIN\T_EDIT.CPP T_EDIT.OBJ
call _BUILD\cc.bat SRC\OBJECTS\O_GLTF.CPP O_GLTF.OBJ
call _BUILD\cc.bat SRC\OBJECTS\O_WAVOBJ.CPP O_WAVOBJ.OBJ

call _BUILD\cc.bat SRC\STL\GLIMPL.CPP GLIMPL.OBJ
call _BUILD\cc.bat SRC\STL\OBJECT.CPP OBJECT.OBJ
call _BUILD\cc.bat SRC\STL\STRING.CPP STRING.OBJ
call _BUILD\cc.bat SRC\STL\DOS.CPP DOS.OBJ
call _BUILD\cc.bat SRC\STL\IMAGE.CPP IMAGE.OBJ
call _BUILD\cc.bat SRC\STL\VECTOR.CPP VECTOR.OBJ
call _BUILD\cc.bat SRC\STL\MATRIX.CPP MATRIX.OBJ
call _BUILD\cc.bat SRC\STL\QUATERNN.CPP QUATERNN.OBJ
call _BUILD\cc.bat SRC\STL\SMPLOBJL.CPP SMPLOBJL.OBJ
call _BUILD\cc.bat SRC\STL\KEYMTRIX.CPP KEYMTRIX.OBJ
call _BUILD\cc.bat SRC\STL\TEXTURES.CPP TEXTURES.OBJ
call _BUILD\cc.bat SRC\STL\SPRTEOBJ.CPP SPRTEOBJ.OBJ
call _BUILD\cc.bat SRC\STL\PSDIMAGE.CPP PSDIMAGE.OBJ
call _BUILD\cc.bat SRC\STL\CGLTFA.CPP CGLTFA.OBJ
call _BUILD\cc.bat SRC\STL\TRUETYPE.CPP TRUETYPE.OBJ

call _BUILD\inc.bat SRC\TERRAIN\T_COLL.CPP T_COLL.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_MAP.CPP T_MAP.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_DLNAY.CPP T_DLNAY.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_LAYERS.CPP T_LAYERS.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_EDIT.CPP T_EDIT.OBJ
call _BUILD\inc.bat SRC\OBJECTS\O_GLTF.CPP O_GLTF.OBJ
call _BUILD\inc.bat SRC\OBJECTS\O_WAVOBJ.CPP O_WAVOBJ.OBJ
call _BUILD\inc.bat SRC\STL\GLIMPL.CPP GLIMPL.OBJ
call _BUILD\inc.bat SRC\STL\OBJECT.CPP OBJECT.OBJ
call _BUILD\inc.bat SRC\STL\STRING.CPP STRING.OBJ
call _BUILD\inc.bat SRC\STL\DOS.CPP DOS.OBJ
call _BUILD\inc.bat SRC\STL\IMAGE.CPP IMAGE.OBJ
call _BUILD\inc.bat SRC\STL\VECTOR.CPP VECTOR.OBJ
call _BUILD\inc.bat SRC\STL\MATRIX.CPP MATRIX.OBJ
call _BUILD\inc.bat SRC\STL\QUATERNN.CPP QUATERNN.OBJ
call _BUILD\inc.bat SRC\STL\SMPLOBJL.CPP SMPLOBJL.OBJ
call _BUILD\inc.bat SRC\STL\KEYMTRIX.CPP KEYMTRIX.OBJ
call _BUILD\inc.bat SRC\STL\TEXTURES.CPP TEXTURES.OBJ
call _BUILD\inc.bat SRC\STL\SPRTEOBJ.CPP SPRTEOBJ.OBJ
call _BUILD\inc.bat SRC\STL\PSDIMAGE.CPP PSDIMAGE.OBJ
call _BUILD\inc.bat SRC\STL\CGLTFA.CPP CGLTFA.OBJ
call _BUILD\inc.bat SRC\STL\TRUETYPE.CPP TRUETYPE.OBJ

:onlymain

call _BUILD\cc.bat SRC\MAIN.CPP MAIN.OBJ
set INCLUDE=%INCLUDEOLD%

@echo system pmodew > R:\LINK.LNK
@echo build errors > R:\LOGS.LOG
@echo -oR:\main.exe > R:\LINK2.LNK
call _BUILD\inc.bat SRC\TERRAIN\T_COLL.CPP T_COLL.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_MAP.CPP T_MAP.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_DLNAY.CPP T_DLNAY.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_LAYERS.CPP T_LAYERS.OBJ
call _BUILD\inc.bat SRC\TERRAIN\T_EDIT.CPP T_EDIT.OBJ
call _BUILD\inc.bat SRC\OBJECTS\O_GLTF.CPP O_GLTF.OBJ
call _BUILD\inc.bat SRC\OBJECTS\O_WAVOBJ.CPP O_WAVOBJ.OBJ
call _BUILD\inc.bat SRC\STL\GLIMPL.CPP GLIMPL.OBJ
call _BUILD\inc.bat SRC\STL\OBJECT.CPP OBJECT.OBJ
call _BUILD\inc.bat SRC\STL\STRING.CPP STRING.OBJ
call _BUILD\inc.bat SRC\STL\DOS.CPP DOS.OBJ
call _BUILD\inc.bat SRC\STL\IMAGE.CPP IMAGE.OBJ
call _BUILD\inc.bat SRC\STL\VECTOR.CPP VECTOR.OBJ
call _BUILD\inc.bat SRC\STL\MATRIX.CPP MATRIX.OBJ
call _BUILD\inc.bat SRC\STL\QUATERNN.CPP QUATERNN.OBJ
call _BUILD\inc.bat SRC\STL\SMPLOBJL.CPP SMPLOBJL.OBJ
call _BUILD\inc.bat SRC\STL\KEYMTRIX.CPP KEYMTRIX.OBJ
call _BUILD\inc.bat SRC\STL\TEXTURES.CPP TEXTURES.OBJ
call _BUILD\inc.bat SRC\STL\SPRTEOBJ.CPP SPRTEOBJ.OBJ
call _BUILD\inc.bat SRC\STL\PSDIMAGE.CPP PSDIMAGE.OBJ
call _BUILD\inc.bat SRC\STL\CGLTFA.CPP CGLTFA.OBJ
call _BUILD\inc.bat SRC\STL\TRUETYPE.CPP TRUETYPE.OBJ
call _BUILD\inc.bat SRC\MAIN.CPP MAIN.OBJ

call _BUILD\AL.BAT R:\LINK.LNK R:\MAIN.EXE

